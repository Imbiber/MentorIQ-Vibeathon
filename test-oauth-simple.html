<!DOCTYPE html>
<html>
<head>
    <title>OAuth Test</title>
</head>
<body>
    <h1>Google OAuth Test</h1>
    <button onclick="testOAuth()">Test OAuth</button>
    <div id="result"></div>

    <script>
        const CLIENT_ID = '542756320480-glsal5u9qait02m8ih42f53di9pb4vlo.apps.googleusercontent.com';
        const REDIRECT_URI = 'http://localhost:8080/auth/google/callback';
        
        function testOAuth() {
            const scope = 'https://www.googleapis.com/auth/calendar';
            const state = Math.random().toString(36).substring(7);
            
            const authUrl = `https://accounts.google.com/oauth2/v2/auth?` +
                `client_id=${encodeURIComponent(CLIENT_ID)}&` +
                `redirect_uri=${encodeURIComponent(REDIRECT_URI)}&` +
                `scope=${encodeURIComponent(scope)}&` +
                `response_type=token&` +
                `state=${state}&` +
                `access_type=online&` +
                `prompt=consent`;

            console.log('Opening OAuth URL:', authUrl);
            
            const popup = window.open(
                authUrl,
                'google-oauth',
                'width=500,height=600,scrollbars=yes,resizable=yes'
            );
            
            if (!popup) {
                document.getElementById('result').innerHTML = '‚ùå Popup blocked';
                return;
            }
            
            document.getElementById('result').innerHTML = 'üîÑ OAuth popup opened...';
        }
    </script>
</body>
</html>